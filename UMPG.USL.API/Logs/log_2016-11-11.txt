2016-11-11 11:46:46.2946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:46.2946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:46.2946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:46.2946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:46.2946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:46.2946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|--GetProductsNew (CURRENT) starts-------------
2016-11-11 11:46:46.2946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|----StartTime :11/11/2016 11:46:46 AM
2016-11-11 11:46:46.5226|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|.End GetLicenseProducts (24733) : elapsed :00:00:00.2240000
2016-11-11 11:46:46.8496|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|..End RetrieveProductHeader (64111) : elapsed :00:00:00.3260000
2016-11-11 11:46:56.9586|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|***End GetLicenseProductRecordingsForLicenseDetails (22745) : elapsed :00:00:09.8850000
2016-11-11 11:46:57.4226|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|GetProductsNew (__CURRENT__) total elapsed :00:00:11.1280000
2016-11-11 11:46:57.4386|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:57.4416|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:57.4416|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:57.4416|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:46:57.4416|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:49:53.1426|DEBUG|UMPG.USL.API.Logging.NLogExceptionLogger| 
-------------------------------------------

______New Exception______
Occurred On: Friday, November 11, 2016 ||  At: 11:49:53 AM 

System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Convert.ToInt32(String value)
   at UMPG.USL.API.Business.DataHarmonization.RecsProductChangeLogService.LocalClientAddedToRecs(List`1 licenseRecordings, List`1 originalPublisherIpCodes) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecsProductChangeLogService.cs:line 447
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForLocalClientChanges(List`1 recsLocalClients, List`1 snapshotLocalClients) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 775
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.FindCopyRightDifferences(List`1 recsCopyrights, List`1 snapshotRecsCopyrights) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 685
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.FindTrackDifferences(List`1 recsTracks, List`1 snapshotWorksTracks) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 622
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForAddedRemovedLicenseProducts(List`1 recsLicenseProducts, List`1 licenseProductsSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 85
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForLicenseProductChanges(List`1 recsLicenseProducts, List`1 licenseProductsSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 28
   at UMPG.USL.API.Business.Recs.ProductManager.CheckSnapshotAgainstRecs(List`1 mechsLicenseProducts, List`1 licenseProductSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Recs\ProductManager.cs:line 548
   at UMPG.USL.API.Business.Recs.ProductManager.FindOutOfSyncRecItems(List`1 mechsLicenseProducts, Int32 licenseId) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Recs\ProductManager.cs:line 535
   at Castle.Proxies.Invocations.IProductManager_FindOutOfSyncRecItems.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at UMPG.USL.API.Business.Licenses.LicenseUpdateIntercepror.Intercept(IInvocation invocation) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Licenses\LicenseUpdateInterceptor.cs:line 25
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Proxies.IProductManagerProxy.FindOutOfSyncRecItems(List`1 licenseProducts, Int32 licenseId)
   at UMPG.USL.API.Controllers.RECsCTRL.ProductController.FindOutOfSyncRecItems(List`1 products, Int32 licenseId) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API\Controllers\RECsCTRL\ProductsController.cs:line 99
   at lambda_method(Closure , Object , Object[] )
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()

 
Headers:  
Connection: keep-alive
Accept: application/json, text/plain, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US, en; q=0.8
Host: spa.service
Referer: http://spa.local/
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36
Origin: http://evil.com/
Token: 17f1d905-d5c9-4375-afd5-f5a93ca4f56e

 
 
Properties on request Object:  
Key: MS_OwinContext -- Value: Microsoft.Owin.OwinContext
Key: MS_RequestContext -- Value: System.Web.Http.Owin.OwinHttpRequestContext
Key: MS_SynchronizationContext -- Value: System.Web.AspNetSynchronizationContext
Key: MS_HttpConfiguration -- Value: System.Web.Http.HttpConfiguration
Key: MS_CorsRequestContextKey -- Value: Origin: http://evil.com/, HttpMethod: POST, IsPreflight: False, Host: spa.service, AccessControlRequestMethod: null, RequestUri: http://spa.service/api/RECsCTRL/Products/FindOutOfSyncRecItems/24733, AccessControlRequestHeaders: {}
Key: MS_RoutingContext -- Value: System.Web.Http.Routing.RoutingContext
Key: MS_HttpRouteData -- Value: System.Web.Http.Routing.RouteCollectionRoute+RouteCollectionRouteData
Key: MS_DependencyScope -- Value: UMPG.USL.API.Installers.WindsorDependencyScope
Key: MS_DisposableRequestResources -- Value: System.Collections.Generic.List`1[System.IDisposable]
Key: MS_HttpActionDescriptor -- Value: System.Web.Http.Controllers.ReflectedHttpActionDescriptor
Key: MS_FormatterParameterBinding_CancellationToken -- Value: System.Threading.CancellationToken
Key: {8572540D-3BD9-46DA-B112-A1E6C9086003} -- Value: System.Web.Http.ValueProviders.Providers.QueryStringValueProvider
Key: {C0E50671-A1D4-429E-93C9-2AA63779924F} -- Value: System.Web.Http.ValueProviders.Providers.RouteDataValueProvider

 
Request Method:  
POST http://spa.service/api/RECsCTRL/Products/FindOutOfSyncRecItems/24733 
 
______End Exception______
-------------------------------------------
 
 

2016-11-11 11:57:40.3446|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:40.3566|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:40.3706|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:40.3706|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:40.3706|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:40.3706|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|--GetProductsNew (CURRENT) starts-------------
2016-11-11 11:57:40.3706|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|----StartTime :11/11/2016 11:57:40 AM
2016-11-11 11:57:40.6556|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|.End GetLicenseProducts (24733) : elapsed :00:00:00.2810000
2016-11-11 11:57:41.0336|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|..End RetrieveProductHeader (64111) : elapsed :00:00:00.3780000
2016-11-11 11:57:51.5216|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|***End GetLicenseProductRecordingsForLicenseDetails (22745) : elapsed :00:00:10.1420000
2016-11-11 11:57:52.0136|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|GetProductsNew (__CURRENT__) total elapsed :00:00:11.6700000
2016-11-11 11:57:52.0136|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:52.0136|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:52.0206|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:52.0206|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:57:52.0206|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 11:59:31.6406|DEBUG|UMPG.USL.API.Logging.NLogExceptionLogger| 
-------------------------------------------

______New Exception______
Occurred On: Friday, November 11, 2016 ||  At: 11:59:31 AM 

System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Convert.ToInt32(String value)
   at UMPG.USL.API.Business.DataHarmonization.RecsProductChangeLogService.LocalClientRemovedFromRecs(List`1 licenseRecordings, List`1 originalPublisherIpCodes) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecsProductChangeLogService.cs:line 473
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForLocalClientChanges(List`1 recsLocalClients, List`1 snapshotLocalClients) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 777
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.FindCopyRightDifferences(List`1 recsCopyrights, List`1 snapshotRecsCopyrights) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 685
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.FindTrackDifferences(List`1 recsTracks, List`1 snapshotWorksTracks) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 622
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForAddedRemovedLicenseProducts(List`1 recsLicenseProducts, List`1 licenseProductsSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 85
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForLicenseProductChanges(List`1 recsLicenseProducts, List`1 licenseProductsSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 28
   at UMPG.USL.API.Business.Recs.ProductManager.CheckSnapshotAgainstRecs(List`1 mechsLicenseProducts, List`1 licenseProductSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Recs\ProductManager.cs:line 548
   at UMPG.USL.API.Business.Recs.ProductManager.FindOutOfSyncRecItems(List`1 mechsLicenseProducts, Int32 licenseId) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Recs\ProductManager.cs:line 535
   at Castle.Proxies.Invocations.IProductManager_FindOutOfSyncRecItems.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at UMPG.USL.API.Business.Licenses.LicenseUpdateIntercepror.Intercept(IInvocation invocation) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Licenses\LicenseUpdateInterceptor.cs:line 25
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Proxies.IProductManagerProxy.FindOutOfSyncRecItems(List`1 licenseProducts, Int32 licenseId)
   at UMPG.USL.API.Controllers.RECsCTRL.ProductController.FindOutOfSyncRecItems(List`1 products, Int32 licenseId) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API\Controllers\RECsCTRL\ProductsController.cs:line 99
   at lambda_method(Closure , Object , Object[] )
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()

 
Headers:  
Connection: keep-alive
Accept: application/json, text/plain, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US, en; q=0.8
Host: spa.service
Referer: http://spa.local/
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36
Origin: http://evil.com/
Token: 29755e01-fc7e-49c8-8fbd-4d26bc3b547e

 
 
Properties on request Object:  
Key: MS_OwinContext -- Value: Microsoft.Owin.OwinContext
Key: MS_RequestContext -- Value: System.Web.Http.Owin.OwinHttpRequestContext
Key: MS_SynchronizationContext -- Value: System.Web.AspNetSynchronizationContext
Key: MS_HttpConfiguration -- Value: System.Web.Http.HttpConfiguration
Key: MS_CorsRequestContextKey -- Value: Origin: http://evil.com/, HttpMethod: POST, IsPreflight: False, Host: spa.service, AccessControlRequestMethod: null, RequestUri: http://spa.service/api/RECsCTRL/Products/FindOutOfSyncRecItems/24733, AccessControlRequestHeaders: {}
Key: MS_RoutingContext -- Value: System.Web.Http.Routing.RoutingContext
Key: MS_HttpRouteData -- Value: System.Web.Http.Routing.RouteCollectionRoute+RouteCollectionRouteData
Key: MS_DependencyScope -- Value: UMPG.USL.API.Installers.WindsorDependencyScope
Key: MS_DisposableRequestResources -- Value: System.Collections.Generic.List`1[System.IDisposable]
Key: MS_HttpActionDescriptor -- Value: System.Web.Http.Controllers.ReflectedHttpActionDescriptor
Key: MS_FormatterParameterBinding_CancellationToken -- Value: System.Threading.CancellationToken
Key: {8572540D-3BD9-46DA-B112-A1E6C9086003} -- Value: System.Web.Http.ValueProviders.Providers.QueryStringValueProvider
Key: {C0E50671-A1D4-429E-93C9-2AA63779924F} -- Value: System.Web.Http.ValueProviders.Providers.RouteDataValueProvider

 
Request Method:  
POST http://spa.service/api/RECsCTRL/Products/FindOutOfSyncRecItems/24733 
 
______End Exception______
-------------------------------------------
 
 

2016-11-11 12:06:34.2756|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:34.2956|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:34.3516|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:34.3516|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:34.3516|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:34.3516|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|--GetProductsNew (CURRENT) starts-------------
2016-11-11 12:06:34.3516|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|----StartTime :11/11/2016 12:06:34 PM
2016-11-11 12:06:34.6356|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|.End GetLicenseProducts (24733) : elapsed :00:00:00.2800000
2016-11-11 12:06:35.0056|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|..End RetrieveProductHeader (64111) : elapsed :00:00:00.3690000
2016-11-11 12:06:45.4566|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|***End GetLicenseProductRecordingsForLicenseDetails (22745) : elapsed :00:00:10.1080000
2016-11-11 12:06:45.9476|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|GetProductsNew (__CURRENT__) total elapsed :00:00:11.6730000
2016-11-11 12:06:45.9506|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:45.9506|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:45.9506|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:45.9506|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:06:45.9506|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:08:27.1916|DEBUG|UMPG.USL.API.Logging.NLogExceptionLogger| 
-------------------------------------------

______New Exception______
Occurred On: Friday, November 11, 2016 ||  At: 12:08:27 PM 

System.InvalidCastException: Unable to cast object of type 'UMPG.USL.Models.Recs.LocalClientCopyright' to type 'System.IConvertible'.
   at System.Convert.ToInt32(Object value)
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CleanLocalClient(List`1 list, List`1 ids) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 1199
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForLocalClientChanges(List`1 recsLocalClients, List`1 snapshotLocalClients) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 781
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.FindCopyRightDifferences(List`1 recsCopyrights, List`1 snapshotRecsCopyrights) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 685
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.FindTrackDifferences(List`1 recsTracks, List`1 snapshotWorksTracks) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 622
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForAddedRemovedLicenseProducts(List`1 recsLicenseProducts, List`1 licenseProductsSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 85
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForLicenseProductChanges(List`1 recsLicenseProducts, List`1 licenseProductsSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 28
   at UMPG.USL.API.Business.Recs.ProductManager.CheckSnapshotAgainstRecs(List`1 mechsLicenseProducts, List`1 licenseProductSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Recs\ProductManager.cs:line 548
   at UMPG.USL.API.Business.Recs.ProductManager.FindOutOfSyncRecItems(List`1 mechsLicenseProducts, Int32 licenseId) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Recs\ProductManager.cs:line 535
   at Castle.Proxies.Invocations.IProductManager_FindOutOfSyncRecItems.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at UMPG.USL.API.Business.Licenses.LicenseUpdateIntercepror.Intercept(IInvocation invocation) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Licenses\LicenseUpdateInterceptor.cs:line 25
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Proxies.IProductManagerProxy.FindOutOfSyncRecItems(List`1 licenseProducts, Int32 licenseId)
   at UMPG.USL.API.Controllers.RECsCTRL.ProductController.FindOutOfSyncRecItems(List`1 products, Int32 licenseId) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API\Controllers\RECsCTRL\ProductsController.cs:line 99
   at lambda_method(Closure , Object , Object[] )
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()

 
Headers:  
Connection: keep-alive
Accept: application/json, text/plain, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US, en; q=0.8
Host: spa.service
Referer: http://spa.local/
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36
Origin: http://evil.com/
Token: c3c93802-2449-4e6f-9754-4d51cd01238a

 
 
Properties on request Object:  
Key: MS_OwinContext -- Value: Microsoft.Owin.OwinContext
Key: MS_RequestContext -- Value: System.Web.Http.Owin.OwinHttpRequestContext
Key: MS_SynchronizationContext -- Value: System.Web.AspNetSynchronizationContext
Key: MS_HttpConfiguration -- Value: System.Web.Http.HttpConfiguration
Key: MS_CorsRequestContextKey -- Value: Origin: http://evil.com/, HttpMethod: POST, IsPreflight: False, Host: spa.service, AccessControlRequestMethod: null, RequestUri: http://spa.service/api/RECsCTRL/Products/FindOutOfSyncRecItems/24733, AccessControlRequestHeaders: {}
Key: MS_RoutingContext -- Value: System.Web.Http.Routing.RoutingContext
Key: MS_HttpRouteData -- Value: System.Web.Http.Routing.RouteCollectionRoute+RouteCollectionRouteData
Key: MS_DependencyScope -- Value: UMPG.USL.API.Installers.WindsorDependencyScope
Key: MS_DisposableRequestResources -- Value: System.Collections.Generic.List`1[System.IDisposable]
Key: MS_HttpActionDescriptor -- Value: System.Web.Http.Controllers.ReflectedHttpActionDescriptor
Key: MS_FormatterParameterBinding_CancellationToken -- Value: System.Threading.CancellationToken
Key: {8572540D-3BD9-46DA-B112-A1E6C9086003} -- Value: System.Web.Http.ValueProviders.Providers.QueryStringValueProvider
Key: {C0E50671-A1D4-429E-93C9-2AA63779924F} -- Value: System.Web.Http.ValueProviders.Providers.RouteDataValueProvider

 
Request Method:  
POST http://spa.service/api/RECsCTRL/Products/FindOutOfSyncRecItems/24733 
 
______End Exception______
-------------------------------------------
 
 

2016-11-11 12:17:33.7926|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:33.8106|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:33.8106|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:33.8106|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:33.8106|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:33.8106|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|--GetProductsNew (CURRENT) starts-------------
2016-11-11 12:17:33.8106|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|----StartTime :11/11/2016 12:17:33 PM
2016-11-11 12:17:34.0946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|.End GetLicenseProducts (24733) : elapsed :00:00:00.2760000
2016-11-11 12:17:34.4576|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|..End RetrieveProductHeader (64111) : elapsed :00:00:00.3630000
2016-11-11 12:17:44.7356|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|***End GetLicenseProductRecordingsForLicenseDetails (22745) : elapsed :00:00:10.0010000
2016-11-11 12:17:45.2296|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|GetProductsNew (__CURRENT__) total elapsed :00:00:11.4380000
2016-11-11 12:17:45.2296|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:45.2296|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:45.2296|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:45.2296|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:17:45.2296|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:20:25.7356|DEBUG|UMPG.USL.API.Logging.NLogExceptionLogger| 
-------------------------------------------

______New Exception______
Occurred On: Friday, November 11, 2016 ||  At: 12:20:25 PM 

System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Convert.ToInt32(String value)
   at UMPG.USL.API.Business.DataHarmonization.RecsProductChangeLogService.LocationCodeAddedToRecs(List`1 licenseRecordings, List`1 originalPublisherIpCodes) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecsProductChangeLogService.cs:line 431
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForDealOwningLocaitonChanges(List`1 recsLocationCodes, List`1 snapshotAquisitionLocationCodes) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 815
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.FindCopyRightDifferences(List`1 recsCopyrights, List`1 snapshotRecsCopyrights) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 687
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.FindTrackDifferences(List`1 recsTracks, List`1 snapshotWorksTracks) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 622
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForAddedRemovedLicenseProducts(List`1 recsLicenseProducts, List`1 licenseProductsSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 85
   at UMPG.USL.API.Business.DataHarmonization.RecCongruencyCheckService.CheckForLicenseProductChanges(List`1 recsLicenseProducts, List`1 licenseProductsSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\DataHarmonization\RecCongruencyCheckService.cs:line 28
   at UMPG.USL.API.Business.Recs.ProductManager.CheckSnapshotAgainstRecs(List`1 mechsLicenseProducts, List`1 licenseProductSnapshots) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Recs\ProductManager.cs:line 548
   at UMPG.USL.API.Business.Recs.ProductManager.FindOutOfSyncRecItems(List`1 mechsLicenseProducts, Int32 licenseId) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Recs\ProductManager.cs:line 535
   at Castle.Proxies.Invocations.IProductManager_FindOutOfSyncRecItems.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at UMPG.USL.API.Business.Licenses.LicenseUpdateIntercepror.Intercept(IInvocation invocation) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API.Business\Licenses\LicenseUpdateInterceptor.cs:line 25
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Proxies.IProductManagerProxy.FindOutOfSyncRecItems(List`1 licenseProducts, Int32 licenseId)
   at UMPG.USL.API.Controllers.RECsCTRL.ProductController.FindOutOfSyncRecItems(List`1 products, Int32 licenseId) in C:\Dev\projects\USL\svn\trunks\Source\API\UMPG.USL.API\Controllers\RECsCTRL\ProductsController.cs:line 99
   at lambda_method(Closure , Object , Object[] )
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass10.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   at System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ExecuteAsync(HttpControllerContext controllerContext, IDictionary`2 arguments, CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()

 
Headers:  
Connection: keep-alive
Accept: application/json, text/plain, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US, en; q=0.8
Host: spa.service
Referer: http://spa.local/
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36
Origin: http://evil.com/
Token: b630b027-b5c2-4885-ba58-6921b289c44a

 
 
Properties on request Object:  
Key: MS_OwinContext -- Value: Microsoft.Owin.OwinContext
Key: MS_RequestContext -- Value: System.Web.Http.Owin.OwinHttpRequestContext
Key: MS_SynchronizationContext -- Value: System.Web.AspNetSynchronizationContext
Key: MS_HttpConfiguration -- Value: System.Web.Http.HttpConfiguration
Key: MS_CorsRequestContextKey -- Value: Origin: http://evil.com/, HttpMethod: POST, IsPreflight: False, Host: spa.service, AccessControlRequestMethod: null, RequestUri: http://spa.service/api/RECsCTRL/Products/FindOutOfSyncRecItems/24733, AccessControlRequestHeaders: {}
Key: MS_RoutingContext -- Value: System.Web.Http.Routing.RoutingContext
Key: MS_HttpRouteData -- Value: System.Web.Http.Routing.RouteCollectionRoute+RouteCollectionRouteData
Key: MS_DependencyScope -- Value: UMPG.USL.API.Installers.WindsorDependencyScope
Key: MS_DisposableRequestResources -- Value: System.Collections.Generic.List`1[System.IDisposable]
Key: MS_HttpActionDescriptor -- Value: System.Web.Http.Controllers.ReflectedHttpActionDescriptor
Key: MS_FormatterParameterBinding_CancellationToken -- Value: System.Threading.CancellationToken
Key: {8572540D-3BD9-46DA-B112-A1E6C9086003} -- Value: System.Web.Http.ValueProviders.Providers.QueryStringValueProvider
Key: {C0E50671-A1D4-429E-93C9-2AA63779924F} -- Value: System.Web.Http.ValueProviders.Providers.RouteDataValueProvider

 
Request Method:  
POST http://spa.service/api/RECsCTRL/Products/FindOutOfSyncRecItems/24733 
 
______End Exception______
-------------------------------------------
 
 

2016-11-11 12:26:27.0966|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:27.1286|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:27.1286|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:27.1286|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:27.1286|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:27.1286|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|--GetProductsNew (CURRENT) starts-------------
2016-11-11 12:26:27.1426|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|----StartTime :11/11/2016 12:26:27 PM
2016-11-11 12:26:27.4126|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|.End GetLicenseProducts (24733) : elapsed :00:00:00.2690000
2016-11-11 12:26:27.7946|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|..End RetrieveProductHeader (64111) : elapsed :00:00:00.3820000
2016-11-11 12:26:38.1016|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|***End GetLicenseProductRecordingsForLicenseDetails (22745) : elapsed :00:00:10.0560000
2016-11-11 12:26:38.5906|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|GetProductsNew (__CURRENT__) total elapsed :00:00:11.4950000
2016-11-11 12:26:38.5936|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:38.5936|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:38.5936|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:38.5936|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
2016-11-11 12:26:38.5936|DEBUG|UMPG.USL.API.Business.Licenses.LicenseProductManager|-------------------------------------
